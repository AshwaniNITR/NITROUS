"use strict";exports.id=9902,exports.ids=[9902],exports.modules={39381:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(11185),i=n.n(a);async function r(){try{await i().connect(process.env.MONGO_URI);let e=i().connection;e.on("connected",()=>{console.log("Mongo connected")}),e.on("error",e=>{console.log("MongoDb connection error",e),process.exit()})}catch(e){console.log("Error occured",e)}}},15418:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(11185),i=n.n(a);let r=new a.Schema({name:{type:String,required:!0,trim:!0},category:{type:String,trim:!0},proficiency:{type:String,enum:["beginner","intermediate","advanced"],default:"intermediate"}}),o=new a.Schema({day:{type:String,required:!0,enum:["weekday","weekend"],lowercase:!0},time:{type:String,required:!0,enum:["morning","afternoon","evening"],lowercase:!0}}),l=new a.Schema({name:{type:String,required:!0,trim:!0,maxlength:[50,"Name cannot be longer than 50 characters"]},email:{type:String,required:!0,lowercase:!0,trim:!0,maxlength:[100,"Email cannot be longer than 100 characters"],match:[/^\S+@\S+\.\S+$/,"Please use a valid email address"]},password:{type:String,select:!1,minlength:[8,"Password must be at least 8 characters"]},location:{type:String,trim:!0,maxlength:[100,"Location cannot be longer than 100 characters"]},profilePhoto:{type:String,validate:{validator:e=>!e||/^https?:\/\//.test(e),message:"Profile photo must be a valid URL"}},skillsOffered:{type:[r],validate:{validator:e=>e.length<=10,message:"Cannot offer more than 10 skills"}},skillsWanted:{type:[r],validate:{validator:e=>e.length<=10,message:"Cannot request more than 10 skills"}},availability:{type:[o],validate:{validator:e=>e.length<=7,message:"Cannot specify availability for more than 7 days"}},isPublic:{type:Boolean,default:!0},isVerified:{type:Boolean,default:!1},verifyToken:{type:String,select:!1},verifyTokenExpiry:{type:Date,select:!1},refreshToken:{type:String,select:!1},authProvider:{type:String,enum:["email","google"],default:"email"},googleId:{type:String},rating:{type:Number,default:0,min:0,max:5},swapCount:{type:Number,default:0},isBanned:{type:Boolean,default:!1}},{timestamps:!0,toJSON:{transform:function(e,t){return delete t.password,delete t.refreshToken,delete t.verifyToken,delete t.verifyTokenExpiry,t}}});l.index({email:1},{unique:!0}),l.index({googleId:1},{unique:!0,sparse:!0}),l.index({isPublic:1}),l.index({"skillsOffered.name":1}),l.index({"skillsWanted.name":1}),l.index({location:"text"}),l.index({"availability.day":1,"availability.time":1}),l.pre("save",function(e){this.googleId&&!this.isVerified&&(this.isVerified=!0),e()});let s=i().models.User||i().model("User",l),d=s}};